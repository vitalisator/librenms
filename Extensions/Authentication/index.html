
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="LibreNMS user and developer documentation">
      
      
        <link rel="canonical" href="http://docs.librenms.org/Extensions/Authentication/">
      
      
        <meta name="author" content="LibreNMS">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.0">
    
    
      
        <title>Authentication Options - LibreNMS Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bc7e593a.min.css">
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <link rel="stylesheet" href="../../librenms.css">
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-79149977-2","docs.librenms.org"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#authentication-modules" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="http://docs.librenms.org" title="LibreNMS Docs" class="md-header-nav__button md-logo" aria-label="LibreNMS Docs">
      
  <img src="../../img/librenms.svg" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            LibreNMS Docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Authentication Options
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/librenms/librenms/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="http://docs.librenms.org" title="LibreNMS Docs" class="md-nav__button md-logo" aria-label="LibreNMS Docs">
      
  <img src="../../img/librenms.svg" alt="logo">

    </a>
    LibreNMS Docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/librenms/librenms/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      1. General
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="1. General" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        1. General
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../General/Acknowledgement/" class="md-nav__link">
      Acknowledgements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../General/Changelog/" class="md-nav__link">
      Changelog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../General/CODE_OF_CONDUCT/" class="md-nav__link">
      Code of Conduct
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Features/" class="md-nav__link">
      Features
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../General/Welcome-to-Observium-users/" class="md-nav__link">
      Welcome to Observium users
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      2. Installing
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="2. Installing" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        2. Installing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Installation/" class="md-nav__link">
      How to install LibreNMS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Installation/Install-LibreNMS/" class="md-nav__link">
      Install LibreNMS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Installation/Images/" class="md-nav__link">
      LibreNMS VMs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Installation/Migrating-from-Observium/" class="md-nav__link">
      Migrating from Observium
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      3. Getting started
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="3. Getting started" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        3. Getting started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../General/Releases/" class="md-nav__link">
      Choosing a release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Adding-a-Device/" class="md-nav__link">
      Adding a device
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Device-Groups/" class="md-nav__link">
      Grouping Devices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../General/Callback-Stats-and-Privacy/" class="md-nav__link">
      Submitting stats
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../General/Updating/" class="md-nav__link">
      Updating an install
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      4. Basic Setup
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="4. Basic Setup" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        4. Basic Setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Applications/" class="md-nav__link">
      Applications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Agent-Setup/" class="md-nav__link">
      Check_MK Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Billing-Module/" class="md-nav__link">
      Billing Module
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Dell-OpenManage/" class="md-nav__link">
      Dell OpenManage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../World-Map/" class="md-nav__link">
      World Map
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Interface-Description-Parsing/" class="md-nav__link">
      Interface Description Parsing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Network-Map/" class="md-nav__link">
      Network Map
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Syslog/" class="md-nav__link">
      Syslog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Dashboards/" class="md-nav__link">
      Dashboards
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Supermicro/" class="md-nav__link">
      Supermicro
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      5. Advanced Setup
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="5. Advanced Setup" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        5. Advanced Setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/1-Minute-Polling/" class="md-nav__link">
      1 Minute Polling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Fast-Ping-Check/" class="md-nav__link">
      Fast Ping Checking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Environment-Variables/" class="md-nav__link">
      Environment Variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Configuration/" class="md-nav__link">
      Configuration Docs
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Authentication Options
    </a>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Two-Factor-Auth/" class="md-nav__link">
      Two-Factor Auth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Auto-Discovery/" class="md-nav__link">
      Auto-discovery Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Distributed-Poller/" class="md-nav__link">
      Scaling LibreNMS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RRDCached/" class="md-nav__link">
      RRDCached
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Sub-Directory/" class="md-nav__link">
      Sub-directory Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Varnish/" class="md-nav__link">
      Varnish
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Dispatcher-Service/" class="md-nav__link">
      Dispatcher Service (RC)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../RRDTune/" class="md-nav__link">
      RRDTune
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../IRC-Bot/" class="md-nav__link">
      IRC Bot
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../IRC-Bot-Extensions/" class="md-nav__link">
      IRC Bot Extensions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SNMP-Proxy/" class="md-nav__link">
      SNMP Proxy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../SNMP-Trap-Handler/" class="md-nav__link">
      SNMP Trap Handler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Customizing-the-Web-UI/" class="md-nav__link">
      Customizing the Web UI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Bare-Dashboard/" class="md-nav__link">
      Bare Dashboard
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Cleanup-options/" class="md-nav__link">
      Cleanup Options
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      6. 3rd Party Integration
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="6. 3rd Party Integration" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        6. 3rd Party Integration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Gateone/" class="md-nav__link">
      Gateone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Graylog/" class="md-nav__link">
      Graylog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Services/" class="md-nav__link">
      Nagios Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../NFSen/" class="md-nav__link">
      NFSen
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Oxidized/" class="md-nav__link">
      Oxidized
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Rancid/" class="md-nav__link">
      Rancid
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../PeeringDB/" class="md-nav__link">
      PeeringDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Proxmox/" class="md-nav__link">
      Proxmox
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7-9" type="checkbox" id="nav-7-9">
    
    <label class="md-nav__link" for="nav-7-9">
      Storing Metrics
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Storing Metrics" data-md-level="2">
      <label class="md-nav__title" for="nav-7-9">
        <span class="md-nav__icon md-icon"></span>
        Storing Metrics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Metric-Storage/" class="md-nav__link">
      Intro
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../metrics/Graphite/" class="md-nav__link">
      Graphite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../metrics/InfluxDB/" class="md-nav__link">
      InfluxDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../metrics/OpenTSDB/" class="md-nav__link">
      OpenTSDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../metrics/Prometheus/" class="md-nav__link">
      Prometheus
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Smokeping/" class="md-nav__link">
      Smokeping
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Weathermap/" class="md-nav__link">
      Weathermap
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      7. API
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="7. API" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        7. API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/" class="md-nav__link">
      Using the API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Devices/" class="md-nav__link">
      Devices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/DeviceGroups/" class="md-nav__link">
      DeviceGroups
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Ports/" class="md-nav__link">
      Ports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/PortGroups/" class="md-nav__link">
      PortGroups
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Alerts/" class="md-nav__link">
      Alerts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Routing/" class="md-nav__link">
      Routing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Switching/" class="md-nav__link">
      Switching
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Inventory/" class="md-nav__link">
      Inventory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Bills/" class="md-nav__link">
      Bills
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/ARP/" class="md-nav__link">
      ARP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Services/" class="md-nav__link">
      Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/System/" class="md-nav__link">
      System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Logs/" class="md-nav__link">
      Logs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../API/Locations/" class="md-nav__link">
      Locations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      8. Alerting
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="8. Alerting" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        <span class="md-nav__icon md-icon"></span>
        8. Alerting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/" class="md-nav__link">
      Intro
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Introduction/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Rules/" class="md-nav__link">
      Rules
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Templates/" class="md-nav__link">
      Templates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Transports/" class="md-nav__link">
      Transports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Creating-Transport/" class="md-nav__link">
      Creating Transports
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Entities/" class="md-nav__link">
      Entities
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Macros/" class="md-nav__link">
      Macros
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Testing/" class="md-nav__link">
      Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Alerting/Device-Dependencies/" class="md-nav__link">
      Device Dependencies
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      9. Getting help
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="9. Getting help" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        <span class="md-nav__icon md-icon"></span>
        9. Getting help
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/" class="md-nav__link">
      How to get help
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/FAQ/" class="md-nav__link">
      FAQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Install%20Validation/" class="md-nav__link">
      Install Validation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Performance/" class="md-nav__link">
      Performance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Discovery%20Support/" class="md-nav__link">
      Discovery Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Poller%20Support/" class="md-nav__link">
      Poller Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Example-Hardware-Setup/" class="md-nav__link">
      Example Hardware Setups
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Remote-Monitoring-VPN/" class="md-nav__link">
      Remote Monitoring VPN
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/SNMP-Configuration-Examples/" class="md-nav__link">
      SNMP Configuration Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/SSL-Configuration/" class="md-nav__link">
      SSL Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Device-Troubleshooting/" class="md-nav__link">
      Device Troubleshooting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Device-Sensors/" class="md-nav__link">
      Device Sensors
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      10. Contributing + Developing
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="10. Contributing + Developing" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        <span class="md-nav__icon md-icon"></span>
        10. Contributing + Developing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/" class="md-nav__link">
      Contributing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Getting-Started/" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Using-Git/" class="md-nav__link">
      Using Git
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Code-Guidelines/" class="md-nav__link">
      Code Guidelines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Style-Guidelines/" class="md-nav__link">
      Style Guidelines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Validating-Code/" class="md-nav__link">
      Validating Code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Code-Structure/" class="md-nav__link">
      Code Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Creating-Documentation/" class="md-nav__link">
      Creating Documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Licensing/" class="md-nav__link">
      Licensing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Component/" class="md-nav__link">
      Component
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-11-11" type="checkbox" id="nav-11-11">
    
    <label class="md-nav__link" for="nav-11-11">
      Support for a new OS
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Support for a new OS" data-md-level="2">
      <label class="md-nav__title" for="nav-11-11">
        <span class="md-nav__icon md-icon"></span>
        Support for a new OS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Support-New-OS/" class="md-nav__link">
      Intro
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/os/Initial-Detection/" class="md-nav__link">
      Initial Detection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/os/Mem-CPU-Information/" class="md-nav__link">
      Mem/CPU Information
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/os/Test-Units/" class="md-nav__link">
      Test Units
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/os/Health-Information/" class="md-nav__link">
      Health Information
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/os/Wireless-Sensors/" class="md-nav__link">
      Wireless Sensors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/os/Custom-Graphs/" class="md-nav__link">
      Custom Graphs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/os/Settings/" class="md-nav__link">
      Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Sensor-State-Support/" class="md-nav__link">
      Sensor State Support
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/SNMP-Traps/" class="md-nav__link">
      SNMP Traps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Dynamic-Config/" class="md-nav__link">
      Dynamic Config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Merging-Pull-Requests/" class="md-nav__link">
      Merging Pull Requests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Developing/Creating-Release/" class="md-nav__link">
      Creating Release
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Plugin-System/" class="md-nav__link">
      Plugin System
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      11. Misc
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="11. Misc" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        <span class="md-nav__icon md-icon"></span>
        11. Misc
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../General/Security/" class="md-nav__link">
      Security information
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/CLI-Tools/" class="md-nav__link">
      CLI Scripts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-12-3" type="checkbox" id="nav-12-3">
    
    <label class="md-nav__link" for="nav-12-3">
      Device Notes
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Device Notes" data-md-level="2">
      <label class="md-nav__title" for="nav-12-3">
        <span class="md-nav__icon md-icon"></span>
        Device Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Device-Notes/" class="md-nav__link">
      Intro
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Device-Notes/Carel-pCOweb-Devices/" class="md-nav__link">
      Carel pCOweb
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Device-Notes/AsuswrtMerlin/" class="md-nav__link">
      Asuswrt-Merlin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Support/Device-Notes/Openwrt/" class="md-nav__link">
      OpenWRT
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/librenms/librenms/edit/master/doc/Extensions/Authentication.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="authentication-modules">Authentication modules</h1>
<p>LibreNMS supports multiple authentication modules along with <a href="http://docs.librenms.org/Extensions/Two-Factor-Auth/">Two Factor Auth</a>.
Here we will provide configuration details for these modules.</p>
<h1 id="available-authentication-modules">Available authentication modules</h1>
<ul>
<li>
<p>MySQL: <a href="#mysql-authentication">mysql</a></p>
</li>
<li>
<p>Active Directory: <a href="#active-directory-authentication">active_directory</a></p>
</li>
<li>
<p>LDAP: <a href="#ldap-authentication">ldap</a></p>
</li>
<li>
<p>Radius: <a href="#radius-authentication">radius</a></p>
</li>
<li>
<p>HTTP Auth: <a href="#http-authentication">http-auth</a>,
  <a href="#http-authentication-ad-authorization">ad_authorization</a>,
  <a href="#http-authentication-ldap-authorization">ldap_authorization</a></p>
</li>
<li>
<p>Single Sign-on: <a href="#single-sign-on">sso</a></p>
</li>
</ul>
<p>⚠️ <strong>When enabling a new authentication module, the local users will no
longer be available to log in.</strong></p>
<h1 id="enable-authentication-module">Enable authentication module</h1>
<p>To enable a particular authentication module you need to set this up
in config.php. Please note that only ONE module can be
enabled. LibreNMS doesn't support multiple authentication mechanism at
the same time.</p>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_mechanism&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;mysql&quot;</span><span class="p">;</span>
</code></pre></div>
<h1 id="user-levels-and-user-account-type">User levels and User account type</h1>
<ul>
<li>
<p>1: <strong>Normal User</strong>: You will need to assign device / port
  permissions for users at this level.</p>
</li>
<li>
<p>5: <strong>Global Read</strong>: Read only Administrator.</p>
</li>
<li>
<p>10: <strong>Administrator</strong>: This is a global read/write admin account.</p>
</li>
<li>
<p>11: <strong>Demo Account</strong>: Provides full read/write with certain
  restrictions (i.e can't delete devices).</p>
</li>
</ul>
<p><strong>Note</strong> Oxidized configs can often contain sensitive data. Because of
that only Administrator account type can see configs.</p>
<h1 id="note-for-selinux-users">Note for SELinux users</h1>
<p>When using SELinux on the LibreNMS server, you need to allow Apache
(httpd) to connect LDAP/Active Directory server, this is disabled by
default. You can use SELinux Booleans to allow network access to LDAP
resources with this command:</p>
<div class="highlight"><pre><span></span><code>setsebool -P <span class="nv">httpd_can_connect_ldap</span><span class="o">=</span><span class="m">1</span>
</code></pre></div>
<h1 id="testing-authentication">Testing authentication</h1>
<p>You can test authentication with this script:</p>
<div class="highlight"><pre><span></span><code>./scripts/auth_test.php
</code></pre></div>
<p>Enable debug output to troubleshoot issues</p>
<h1 id="mysql-authentication">MySQL Authentication</h1>
<p>Config option: <code>mysql</code></p>
<p>This is default option with LibreNMS so you should have already have the configuration setup in your
environment file (.env).</p>
<div class="highlight"><pre><span></span><code>DB_HOST=HOSTNAME
DB_DATABASE=DBNAME
DB_USERNAME=DBUSER
DB_PASSWORD=&quot;DBPASS&quot;
</code></pre></div>
<h1 id="active-directory-authentication">Active Directory Authentication</h1>
<p>Config option: <code>active_directory</code></p>
<p>Install <strong>php_ldap</strong>  or <strong>php7.0-ldap</strong>, making sure to install the
same version as PHP.</p>
<p>If you have issues with secure LDAP try setting
<code>$config['auth_ad_check_certificates']</code> to <code>0</code>, this will ignore
certificate errors.</p>
<h2 id="require-actual-membership-of-the-configured-groups">Require actual membership of the configured groups</h2>
<p>If you set <code>$config['auth_ad_require_groupmembership']</code> to 1, the
authenticated user has to be a member of the specific group.
Otherwise all users can authenticate, and will be either level 0 or
you may set <code>$config['auth_ad_global_read']</code> to 1 and all users will
have read only access unless otherwise specified.</p>
<h2 id="old-account-cleanup">Old account cleanup</h2>
<p>Cleanup of old accounts is done by checking the authlog. You will need
to set the number of days when old accounts will be purged
AUTOMATICALLY by daily.sh.</p>
<p>Please ensure that you set the $config['authlog_purge'] value to be
greater than $config['active_directory']['users_purge'] otherwise old
users won't be removed.</p>
<h2 id="sample-configuration">Sample configuration</h2>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_mechanism&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;active_directory&#39;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ad_url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;ldaps://server.example.com&#39;</span><span class="p">;</span>    <span class="c1">// Set server(s), space separated. Prefix with ldaps:// for ssl</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ad_domain&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;example.com&#39;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ad_base_dn&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;dc=example,dc=com&#39;</span><span class="p">;</span>         <span class="c1">// groups and users must be under this dn</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ad_check_certificates&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>             <span class="c1">// require a valid ssl certificate</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ad_binduser&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;examplebinduser&#39;</span><span class="p">;</span>          <span class="c1">// bind user (non-admin)</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ad_bindpassword&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;examplepassword&#39;</span><span class="p">;</span>      <span class="c1">// bind password</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ad_timeout&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>                           <span class="c1">// time to wait before giving up (or trying the next server)</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ad_debug&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>                         <span class="c1">// enable for verbose debug messages</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;active_directory&#39;</span><span class="p">][</span><span class="s1">&#39;users_purge&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>          <span class="c1">// purge users who haven&#39;t logged in for 30 days.</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ad_require_groupmembership&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>        <span class="c1">// false: allow all users to auth level 0</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ad_groups&#39;</span><span class="p">][</span><span class="s1">&#39;ad-admingroup&#39;</span><span class="p">][</span><span class="s1">&#39;level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="c1">// set the &quot;AD AdminGroup&quot; group to admin level</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ad_groups&#39;</span><span class="p">][</span><span class="s1">&#39;ad-usergroup&#39;</span><span class="p">][</span><span class="s1">&#39;level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>   <span class="c1">// set the &quot;AD UserGroup&quot; group to global read only level</span>
</code></pre></div>
<p>Replace <code>ad-admingroup</code> with your Active Directory admin-user group
and <code>ad-usergroup</code> with your standard user group. It is <strong>highly
suggested</strong> to create a bind user, otherwise "remember me", alerting
users, and the API will not work.</p>
<h2 id="active-directory-redundancy">Active Directory redundancy</h2>
<p>You can set two Active Directory servers by editing the
<code>$config['auth_ad_url']</code> like this example:</p>
<div class="highlight"><pre><span></span><code>$config[&#39;auth_ad_url&#39;] = &quot;ldaps://dc1.example.com ldaps://dc2.example.com&quot;;
</code></pre></div>
<h2 id="active-directory-ldap-filters">Active Directory LDAP filters</h2>
<p>You can add an LDAP filter to be ANDed with the builtin user filter (<code>(sAMAccountName=$username)</code>).</p>
<p>The defaults are:</p>
<div class="highlight"><pre><span></span><code>$config[&#39;auth_ad_user_filter&#39;] = &quot;(objectclass=user)&quot;;
$config[&#39;auth_ad_group_filter&#39;] = &quot;(objectclass=group)&quot;;
</code></pre></div>
<p>This yields <code>(&amp;(objectclass=user)(sAMAccountName=$username))</code> for the
user filter and <code>(&amp;(objectclass=group)(sAMAccountName=$group))</code> for
the group filter.</p>
<h1 id="ldap-authentication">LDAP Authentication</h1>
<p>Config option: <code>ldap</code></p>
<p>Install <strong>php_ldap</strong> or <strong>php7.0-ldap</strong>, making sure to install the
same version as PHP.</p>
<h2 id="standard-config">Standard config</h2>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_mechanism&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;ldap&#39;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_server&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;ldap.example.com&#39;</span><span class="p">;</span>               <span class="c1">// Set server(s), space separated. Prefix with ldaps:// for ssl</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_suffix&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;,ou=People,dc=example,dc=com&#39;</span><span class="p">;</span>   <span class="c1">// appended to usernames</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_groupbase&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;ou=groups,dc=example,dc=com&#39;</span><span class="p">;</span> <span class="c1">// all groups must be inside this</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_groups&#39;</span><span class="p">][</span><span class="s1">&#39;admin&#39;</span><span class="p">][</span><span class="s1">&#39;level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>             <span class="c1">// set admin group to admin level</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_groups&#39;</span><span class="p">][</span><span class="s1">&#39;pfy&#39;</span><span class="p">][</span><span class="s1">&#39;level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>                <span class="c1">// set pfy group to global read only level</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_groups&#39;</span><span class="p">][</span><span class="s1">&#39;support&#39;</span><span class="p">][</span><span class="s1">&#39;level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>            <span class="c1">// set support group as a normal user</span>
</code></pre></div>
<h2 id="additional-options-usually-not-needed">Additional options (usually not needed)</h2>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_version&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="c1"># v2 or v3</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_port&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">389</span><span class="p">;</span>                    <span class="c1">// 389 or 636 for ssl</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_starttls&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">True</span><span class="p">;</span>               <span class="c1">// Enable TLS on port 389</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_prefix&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;uid=&#39;</span><span class="p">;</span>               <span class="c1">// prepended to usernames</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_group&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="s1">&#39;cn=groupname,ou=groups,dc=example,dc=com&#39;</span><span class="p">;</span> <span class="c1">// generic group with level 0</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_groupmemberattr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;memberUid&#39;</span><span class="p">;</span> <span class="c1">// attribute to use to see if a user is a member of a group</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_uid_attribute&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;uidnumber&#39;</span><span class="p">;</span>   <span class="c1">// attribute for unique id</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_debug&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>                 <span class="c1">// enable for verbose debug messages</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_userdn&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>                 <span class="c1">// Uses a users full DN as the value of the member attribute in a group instead of member: username. (it’s member: uid=username,ou=groups,dc=domain,dc=com)</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_userlist_filter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;service=informatique&#39;</span><span class="p">;</span> <span class="c1">// Replace &#39;service=informatique&#39; by your ldap filter to limit the number of responses if you have an ldap directory with thousand of users</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_wildcard_ou&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span> <span class="c1">// Search for user matching user name independently of OU set in auth_ldap_suffix. Useful if your users are in different OU. Bind username, if set, still user auth_ldap_suffix</span>
</code></pre></div>
<h2 id="ldap-bind-user-optional">LDAP bind user (optional)</h2>
<p>If your ldap server does not allow anonymous bind, it is highly
suggested to create a bind user, otherwise "remember me", alerting
users, and the API will not work.</p>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_binduser&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;ldapbind&#39;</span><span class="p">;</span> <span class="c1">// will use auth_ldap_prefix and auth_ldap_suffix</span>
<span class="c1">#$config[&#39;auth_ldap_binddn&#39;] = &#39;CN=John.Smith,CN=Users,DC=MyDomain,DC=com&#39;; // overrides binduser</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_bindpassword&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;password&#39;</span><span class="p">;</span>
</code></pre></div>
<h2 id="ldap-server-redundancy">LDAP server redundancy</h2>
<p>You can set two LDAP servers by editing the
<code>$config['auth_ldap_server']</code> like this example:</p>
<div class="highlight"><pre><span></span><code>$config[&#39;auth_ldap_server&#39;] = &quot;ldaps://dir1.example.com ldaps://dir2.example.com&quot;;
</code></pre></div>
<p>An example config setup for use with Jumpcloud LDAP as a service is:</p>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_mechanism&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ldap&quot;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_version&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_server&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ldap.jumpcloud.com&quot;</span><span class="p">;</span> <span class="c1">#Set to ldaps://ldap.jumpcloud.com to enable LDAPS</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_port&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">389</span><span class="p">;</span> <span class="c1">#Set to 636 if using LDAPS</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_prefix&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;uid=&quot;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_suffix&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;,ou=Users,o={id},dc=jumpcloud,dc=com&quot;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_groupbase&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ou=Users,o={id},dc=jumpcloud,dc=com&quot;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_groupmemberattr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;member&quot;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_groups&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;{group}&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;level&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">],];</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_userdn&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre></div>
<p>Replace {id} with the unique ID provided by Jumpcloud.  Replace
{group} with the unique group name created in Jumpcloud.  This field
is case sensitive.</p>
<p>Note: If you have multiple user groups to define individual access
levels replace the <code>$config['auth_ldap_groups']</code> line with the
following:</p>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_groups&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;{admin_group}&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;level&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">],</span>
    <span class="s1">&#39;{global_readonly_group}&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;level&#39;</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">],</span>
<span class="p">];</span>
</code></pre></div>
<h1 id="radius-authentication">Radius Authentication</h1>
<p>Please note that a mysql user is created for each user the logs in
successfully. User level 1 is assigned to those accounts so you will
then need to assign the relevant permissions unless you set
<code>$config['radius']['userlevel']</code> to be something other than 1.</p>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">][</span><span class="s1">&#39;hostname&#39;</span><span class="p">]</span>   <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">][</span><span class="s1">&#39;port&#39;</span><span class="p">]</span>       <span class="o">=</span> <span class="s1">&#39;1812&#39;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">][</span><span class="s1">&#39;secret&#39;</span><span class="p">]</span>     <span class="o">=</span> <span class="s1">&#39;testing123&#39;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">][</span><span class="s1">&#39;timeout&#39;</span><span class="p">]</span>    <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">][</span><span class="s1">&#39;users_purge&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">14</span><span class="p">;</span><span class="c1">//Purge users who haven&#39;t logged in for 14 days.</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;radius&#39;</span><span class="p">][</span><span class="s1">&#39;default_level&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="c1">//Set the default user level when automatically creating a user.</span>
</code></pre></div>
<h2 id="old-account-cleanup_1">Old account cleanup</h2>
<p>Cleanup of old accounts is done by checking the authlog. You will need
to set the number of days when old accounts will be purged
AUTOMATICALLY by daily.sh.</p>
<p>Please ensure that you set the $config['authlog_purge'] value to be
greater than $config['radius']['users_purge'] otherwise old users
won't be removed.</p>
<h1 id="http-authentication">HTTP Authentication</h1>
<p>Config option: <code>http-auth</code></p>
<p>LibreNMS will expect the user to have authenticated via your
webservice already. At this stage it will need to assign a userlevel
for that user which is done in one of two ways:</p>
<ul>
<li>
<p>A user exists in MySQL still where the usernames match up.</p>
</li>
<li>
<p>A global guest user (which still needs to be added into MySQL:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;http_auth_guest&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;guest&quot;</span><span class="p">;</span>
</code></pre></div>
<p>This will then assign the userlevel for guest to all authenticated users.</p>
<h2 id="http-authentication-ad-authorization">HTTP Authentication / AD Authorization</h2>
<p>Config option: <code>ad-authorization</code></p>
<p>This module is a combination of <strong><em>http-auth</em></strong> and <strong><em>active</em>directory</strong>_</p>
<p>LibreNMS will expect the user to have authenticated via your
webservice already (e.g. using Kerberos Authentication in Apache) but
will use Active Directory lookups to determine and assign the
userlevel of a user. The userlevel will be calculated by using AD
group membership information as the <strong><em>active</em>directory</strong>_ module
does.</p>
<p>The configuration is the same as for the <strong><em>active</em>directory</strong>_ module
with two extra, optional options: auth_ad_binduser and
auth_ad_bindpassword. These should be set to a AD user with read
capabilities in your AD Domain in order to be able to perform
searches. If these options are omitted, the module will attempt an
anonymous bind (which then of course must be allowed by your Active
Directory server(s)).</p>
<p>There is also one extra option for controlling user information caching: auth_ldap_cache_ttl.
This option allows to control how long user information (user_exists,
userid, userlevel) are cached within the PHP Session.
The default value is 300 seconds.
To disable this caching (highly discourage) set this option to 0.</p>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ad_binduser&#39;</span><span class="p">]</span>     <span class="o">=</span> <span class="s2">&quot;ad_binduser&quot;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ad_bindpassword&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ad_bindpassword&quot;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_cache_ttl&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="mi">300</span><span class="p">;</span>
</code></pre></div>
<h2 id="http-authentication-ldap-authorization">HTTP Authentication / LDAP Authorization</h2>
<p>Config option: <code>ldap-authorization</code></p>
<p>This module is a combination of <strong><em>http-auth</em></strong> and <strong><em>ldap</em></strong></p>
<p>LibreNMS will expect the user to have authenticated via your
webservice already (e.g. using Kerberos Authentication in Apache) but
will use LDAP to determine and assign the userlevel of a user. The
userlevel will be calculated by using LDAP group membership
information as the <strong><em>ldap</em></strong> module does.</p>
<p>The configuration is the same as for the <strong><em>ldap</em></strong> module with one extra option: auth_ldap_cache_ttl.
This option allows to control how long user information (user_exists, userid, userlevel) are cached within the PHP Session.
The default value is 300 seconds.
To disabled this caching (highly discourage) set this option to 0.</p>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_ldap_cache_ttl&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">300</span><span class="p">;</span>
</code></pre></div>
<h1 id="viewembedded-graphs-without-being-logged-into-librenms">View/embedded graphs without being logged into LibreNMS</h1>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;allow_unauth_graphs_cidr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;127.0.0.1/32&#39;</span><span class="p">);</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;allow_unauth_graphs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre></div>
<h1 id="single-sign-on">Single Sign-on</h1>
<p>The single sign-on mechanism is used to integrate with third party
authentication providers that are managed outside of LibreNMS - such
as ADFS, Shibboleth, EZProxy, BeyondCorp, and others. A large number
of these methods use
<a href="https://en.wikipedia.org/wiki/Security_Assertion_Markup_Language">SAML</a>
the module has been written assuming the use of SAML, and therefore
these instructions contain some SAML terminology, but it should be
possible to use any software that works in a similar way.</p>
<p>In order to make use of the single sign-on module, you need to have an
Identity Provider up and running, and know how to configure your
Relying Party to pass attributes to LibreNMS via header injection or
environment variables. Setting these up is outside of the scope of
this documentation.</p>
<p>As this module deals with authentication, it is extremely careful
about validating the configuration - if it finds that certain values
in the configuration are not set, it will reject access rather than
try and guess.</p>
<h2 id="basic-configuration">Basic Configuration</h2>
<p>To get up and running, all you need to do is configure the following values:</p>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_mechanism&#39;</span><span class="p">]</span>        <span class="o">=</span> <span class="s2">&quot;sso&quot;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span>           <span class="o">=</span> <span class="s2">&quot;env&quot;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;group_strategy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;static&quot;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;static_level&#39;</span><span class="p">]</span>   <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</code></pre></div>
<p>This, along with the defaults, sets up a basic Single Sign-on setup that:</p>
<ul>
<li>Reads values from environment variables</li>
<li>Automatically creates users when they're first seen</li>
<li>Authomatically updates users with new values</li>
<li>Gives everyone privilege level 10</li>
</ul>
<p>This happens to mimic the behaviour of <a href="#http-auth">http-auth</a>, so if
this is the kind of setup you want, you're probably better of just
going and using that mechanism.</p>
<h2 id="security">Security</h2>
<p>If there is a proxy involved (e.g. EZProxy, Azure AD Application
Proxy, NGINX, mod_proxy) it's <strong><em>essential</em></strong> that you have some means
in place to prevent headers being injected between the proxy and the
end user, and also prevent end users from contacting LibreNMS
directly.</p>
<p>This should also apply to user connections to the proxy itself - the
proxy <strong><em>must not</em></strong> be allowed to blindly pass through HTTP
headers. <strong><em>mod</em>security</strong>_ should be considered a minimum, with a
full <a href="https://en.wikipedia.org/wiki/Web_application_firewall">WAF</a>
being strongly recommended. This advice applies to the IDP too.</p>
<p>The mechanism includes very basic protection, in the form of an IP
whitelist with should contain the source addresses of your proxies:</p>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;trusted_proxies&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;127.0.0.1/8&#39;</span><span class="p">,</span> <span class="s1">&#39;::1/128&#39;</span><span class="p">,</span> <span class="s1">&#39;192.0.2.0&#39;</span><span class="p">,</span> <span class="s1">&#39;2001:DB8::&#39;</span><span class="p">];</span>
</code></pre></div>
<p>This configuration item should contain an array with a list of IP
addresses or CIDR prefixes that are allowed to connect to LibreNMS and
supply environment variables or headers.</p>
<h2 id="advanced-configuration-options">Advanced Configuration Options</h2>
<h3 id="user-attribute">User Attribute</h3>
<p>If for some reason your relying party doesn't store the username in
<strong><em>REMOTE</em>USER</strong>_, you can override this choice.</p>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;user_attr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;HTTP_UID&#39;</span><span class="p">;</span>
</code></pre></div>
<p>Note that the user lookup is a little special - normally headers are
prefixed with <strong><em>HTTP_</em></strong>, however this is not the case for remote
user - it's a special case. If you're using something different you
need to figure out of the <strong><em>HTTP_</em></strong> prefix is required or not
yourself.</p>
<h3 id="automatic-user-createupdate">Automatic User Create/Update</h3>
<p>These are enabled by default:</p>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;create_users&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;update_users&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</code></pre></div>
<p>If these are not enabled, user logins will be (somewhat silently)
rejected unless an administrator has created the account in
advance. Note that in the case of SAML federations, unless release of
the users true identity has been negotiated with the IDP, the username
(probably ePTID) is not likely to be predicable.</p>
<h3 id="personalisation">Personalisation</h3>
<p>If the attributes are being populated, you can instruct the mechanism
to add additional information to the user's database entry:</p>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;email_attr&#39;</span><span class="p">]</span>    <span class="o">=</span> <span class="s2">&quot;mail&quot;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;realname_attr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;displayName&quot;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;descr_attr&#39;</span><span class="p">]</span>    <span class="o">=</span> <span class="s2">&quot;unscoped-affiliation</span>
</code></pre></div>
<h3 id="group-strategies">Group Strategies</h3>
<h4 id="static">Static</h4>
<p>As used above, <strong><em>static</em></strong> gives every single user the same privilege
level. If you're working with a small team, or don't need access
control, this is probably suitable.</p>
<h4 id="attribute">Attribute</h4>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;group_strategy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;attribute&quot;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;level_attr&#39;</span><span class="p">]</span>     <span class="o">=</span> <span class="s2">&quot;entitlement&quot;</span><span class="p">;</span>
</code></pre></div>
<p>If your Relying Party is capable of calculating the necessary
privilege level, you can configure the module to read the privilege
number straight from an attribute. <strong><em>sso</em>level_attr</strong><em> should contain
the name of the attribute that the Relying Party exposes to LibreNMS -
as long as <strong><em>sso</em>mode</strong></em> is correctly set, the mechanism should find
the value.</p>
<h4 id="group-map">Group Map</h4>
<p>This is the most flexible (and complex) way of assigning privileges.</p>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;group_strategy&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="s2">&quot;map&quot;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;group_attr&#39;</span><span class="p">]</span>      <span class="o">=</span> <span class="s2">&quot;member&quot;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;group_level_map&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;librenms-admins&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;librenms-readers&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;librenms-billingcontacts&#39;</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">];</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;group_delimiter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="p">;</span>
</code></pre></div>
<p>The mechanism expects to find a delimited list of groups within the
attribute that <strong><em>sso</em>group_attr</strong>_ points to. This should be an
associative array of group name keys, with  privilege levels as
values. The mechanism will scan the list and find the <strong><em>highest</em></strong>
privilege level that the user is entitled to, and assign that value to
the user.</p>
<p>This format may be specific to Shibboleth; other relying party
software may need changes to the mechanism (e.g. <strong><em>mod</em>auth_mellon</strong>_
may create pseudo arrays).</p>
<p>There is an optional value for sites with large numbers of groups:</p>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;group_filter&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="s2">&quot;/librenms-(.*)/i&quot;</span><span class="p">;</span>
</code></pre></div>
<p>This filter causes the mechanism to only consider groups matching a regular expression.</p>
<h3 id="logout-behaviour">Logout Behaviour</h3>
<p>LibreNMS has no capability to log out a user authenticated via Single
Sign-On - that responsability falls to the Relying Party.</p>
<p>If your Relying Party has a magic URL that needs to be called to end a
session, you can configure LibreNMS to direct the user to it:</p>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;post_logout_action&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;/Shibboleth.sso/Logout&#39;</span><span class="p">;</span>
</code></pre></div>
<p>This option functions independantly of the Single Sign-on mechanism.</p>
<h2 id="complete-configuration">Complete Configuration</h2>
<p>This configuration works on my deployment with a Shibboleth relying
party, injecting environment variables, with the IDP supplying a list
of groups.</p>
<div class="highlight"><pre><span></span><code><span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_mechanism&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sso&#39;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;auth_logout_handler&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;/Shibboleth.sso/Logout&#39;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;env&#39;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;create_users&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;update_users&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;realname_attr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;displayName&#39;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;email_attr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;mail&#39;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;group_strategy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;map&#39;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;group_attr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;member&#39;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;group_filter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;/(librenms-.*)/i&#39;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;group_delimiter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;sso&#39;</span><span class="p">][</span><span class="s1">&#39;group_level_map&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;librenms-demo&#39;</span> <span class="o">=&gt;</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;librenms-globaladmin&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;librenms-globalread&#39;</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;librenms-lowpriv&#39;</span><span class="o">=&gt;</span> <span class="mi">1</span><span class="p">];</span>
</code></pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../../Support/Configuration/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Configuration Docs
              </div>
            </div>
          </a>
        
        
          <a href="../Two-Factor-Auth/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Two-Factor Auth
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.6a3d08fc.min.js"></script>
      <script src="../../assets/javascripts/bundle.71201edf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../librenms-docs.js"></script>
      
    
  </body>
</html>